@page "/identityserver4/2020"

@using Blog.MVP.Blazor.Models

@inject HttpClient Http


<div class="container mt-4 mb-5">
    <div class="row">
        <section class="col-lg-9 col-md-12">

            <ArtTitle Title="IdentityServer4 (2020)" Subtitle="Authorization Authentication" />

            <hr>

            @if (_blogs != null)
            {
                foreach (var item in _blogs.response.data)
                {
                    <ArtBody bID="@item.bID" btitle="@item.btitle" bcontent="@item.bcontent" bCreateTime="@item.bCreateTime" btraffic="@item.btraffic" />
                }
            }
            else
            {
                <p><em>Loading...</em></p>
            }
        </section>

        <Author />

    </div>
</div>

@code {
    private MessageModel<PageModel<BlogArticle>> _blogs;

    protected override async Task OnInitializedAsync()
    {
        var students = await Http.GetJsonAsync<MessageModel<PageModel<BlogArticle>>>("/api/Blog?page=1&bcategory=MVP_ids4_2020&intPageSize=20");
        this._blogs = students;
    }
}